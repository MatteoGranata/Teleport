(()=>{"use strict";const e=document.getElementById("research");e.addEventListener("keyup",(function(e){e.target.value.replace(/ /g,"-").replace(/,/g,"").toLowerCase(),t.addEventListener("click",(function(){var t=e.target.value.replace(/ /g,"-").replace(/,/g,"").toLowerCase();let n,r;imgUrl=`https://api.teleport.org/api/urban_areas/slug:${t}/images/ `,scoreUrl=`https://api.teleport.org/api/urban_areas/slug:${t}/scores/`,fetch(scoreUrl).then((e=>e.json())).then((e=>{n=e.categories,r=e.summary,nameCity=n.name,function(e){const t=document.getElementById("score");for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach((e=>{const n=`<div class="container"><div class="container-bar"><div class="bar" style="background-color: ${e.color}; width: ${10*String(e.score_out_of_10).substring(0,3)}%;"></div></div><p class="score">${String(e.score_out_of_10).substring(0,3)}/10</p><h3 class="score-name">${e.name}</h3></div>`;t.insertAdjacentHTML("beforeend",n)}));const n=document.getElementById("description");for(;n.firstChild;)n.removeChild(n.firstChild);const i=`<div class="container"><h2>${r}</h2></div>`;n.insertAdjacentHTML("afterbegin",i),fetch(imgUrl).then((e=>e.json())).then((e=>{image=e.photos[0].image.web,function(e){const t=document.getElementById("img");for(;t.firstChild;)t.removeChild(t.firstChild);const n=`<div class="container"><img src="${e}"></div>`;t.insertAdjacentHTML("afterbegin",n)}(image)}))}(n)}))}))})),e.addEventListener("keyup",(function(e){e.target.value.replace(/ /g,"-").replace(/,/g,"").replace(/\s*\(.*?\)\s*/g,"").toLowerCase(),fetch(`https://api.teleport.org/api/cities/?search=${e.target.value}&limit=5`).then((e=>e.json())).then((e=>{n=e._embedded["city:search-results"],function(e){const n=document.getElementById("result");for(;n.firstChild;)n.removeChild(n.firstChild);e.forEach((e=>{let r=`<li>${e.matching_full_name}</li>`;n.insertAdjacentHTML("beforeend",r),n.addEventListener("click",(function(e){for(document.getElementById("research").value=e.target.innerHTML;n.firstChild;)n.removeChild(n.firstChild);fetch(`https://api.teleport.org/api/cities/?search=${e.target.innerHTML}&limit=5`).then((e=>e.json())).then((e=>{try{geonameId=e._embedded["city:search-results"][0]._links["city:item"].href}catch(e){const t=document.getElementById("error");for(;t.firstChild;)t.removeChild(t.firstChild);const n="citta non trovata .";return t.insertAdjacentHTML("beforeend",n),console.clear()}fetch(geonameId).then((e=>e.json())).then((e=>{var n=(n=e.name).replace(/ /g,"-").replace(/,/g,"").toLowerCase();t.addEventListener("click",(function(){imgUrl=`https://api.teleport.org/api/urban_areas/slug:${n}/images/ `,scoreUrl=`https://api.teleport.org/api/urban_areas/slug:${n}/scores/`,fetch(scoreUrl).then((e=>e.json())).then((e=>{try{dataset=e.categories,summary=e.summary,function(e){const t=document.getElementById("score-container");for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach((e=>{const n=`<div class="container"><div class="container-bar"><div class="bar" style="background-color: ${e.color}; width: ${10*String(e.score_out_of_10).substring(0,3)}%;"></div></div><p class="score">${String(e.score_out_of_10).substring(0,3)}/10</p><h3 class="score-name">${e.name}</h3></div>`;t.insertAdjacentHTML("beforeend",n)}));const n=document.getElementById("description");for(;n.firstChild;)n.removeChild(n.firstChild);const r=`<div class="container"><h2>${summary}</h2></div>`;n.insertAdjacentHTML("afterbegin",r),fetch(imgUrl).then((e=>e.json())).then((e=>{image=e.photos[0].image.web,function(e){const t=document.getElementById("img");for(;t.firstChild;)t.removeChild(t.firstChild);const n=`<div class="container"><img src="${e}"></div>`;t.insertAdjacentHTML("afterbegin",n)}(image)}))}(dataset)}catch(e){const t=document.getElementById("error");for(;t.firstChild;)t.removeChild(t.firstChild);const n="citta non trovata .";return t.insertAdjacentHTML("beforeend",n),console.clear()}}))}))}))}))}))}))}(n)}))})),document.getElementById("result"),document.querySelector("section"),document.getElementById("city"),document.getElementById("container");const t=document.getElementById("button");let n;const r=document.getElementById("info"),i=document.getElementById("infoPoint"),s=document.getElementById("home"),o=document.getElementById("homePage"),c=document.getElementById("earth");r.style.display="none",s.style.display="none",i.addEventListener("click",(function(){s.style.display="block",r.style.display="block",o.style.display="none",i.style.display="none",c.style.display="none"})),s.addEventListener("click",(function(){o.style.display="block",r.style.display="none",i.style.display="block",s.style.display="none",c.style.display="block"}))})();